package tasks5to8.csvDatabase;

import java.util.ArrayList;
import java.util.List;

public class CSVDatabase {

	public static void main(String[] args) {
		CSVDatabase db=new CSVDatabase();
		//db.searchByFullname("Mariana Ivanova");
		//db.searchById(6);
		//db.searchById(17);
		db.deleteById(5);
	}

	List<Student> students=new ArrayList<>();
	List<Grades> grades= new ArrayList<>();
	
	public CSVDatabase() {	
		FileRead f=new FileRead();
		this.students = f.readStudentsFile();
		this.grades = f.readGradesFile();
	}
	
	public void searchByFullname(String fullName){
		String[] names=fullName.split(" ");
		for (Student s : students) {
			if(s.getFirstName().equals(names[0]) && 
					s.getLastName().equals(names[1])){
				searchById(s.getId());
			}
		}
		
	}
	
	public void searchById(int id){
		boolean found=false;
		for (Student s : students) {
			if(s.getId()==id){
				found=true;
				System.out.println(s);
			}
		}
		for (Grades g : grades) {
			if(g.getId()==id){
				System.out.format("# %s\n# %s\n", g.getMathGrades(), g.getLiterGrades());
			}
		}
		if (!found) {
			System.out.println("Student does not exist");
		}
	}
	
	public void deleteById(int id){
		List<Student>studentList=new ArrayList<>();
		studentList=students;
		List<Grades> gradesList=new ArrayList<>();
		gradesList=grades;
		boolean found=false;
		for (Student s : studentList) {
			if(s.getId()==id){
				studentList.remove(s);
				found=true;
			}
		}
		for (Grades g : gradesList) {
			if(g.getId()==id){
				gradesList.remove(g);
			}
		}
		System.out.println(studentList);
		System.out.println(gradesList);
		FileRead f=new FileRead();
		//f.saveStudentsInFile(students);
		//f.saveGradesInFile(grades);
		if (!found) {
			System.out.println("Student does not exist");
		}
	}
} 
